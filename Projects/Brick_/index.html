<head>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.3.3/semantic.min.css">
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script>
  // Fix jQuery not being defined
  // See https://github.com/Semantic-Org/Semantic-UI/issues/5201#issuecomment-359112270
  // https://electronjs.org/docs/faq#i-can-not-use-jqueryrequirejsmeteorangularjs-in-electron

  try {
    $ = jQuery = module.exports;
    // If you want module.exports to be empty, uncomment:
    // module.exports = {};
  } catch (e) {}
</script>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.3.3/semantic.min.js"></script>

</head>
<body>
  <h1 style="text-align: center; margin-top: 10px"> Welcome to the Kanaloa GUI </h1>  <br><br>

  <img style="display: block; margin-left: auto; margin-right: auto; width: 50%;" src="./public/Plugins/test_ros_subscriber/Kanaloa_logo1_filled.png" alt="Kanaloa Logo">

  <div id="html-topic-div"></div>
  <div id="test_image_div"></div>

<!--
  <br><br>
  <button id="Refresh IPC">Refresh IPC</button>
  <br>
  <iframe style="width:100%; height:400px;"  src="http://localhost:8080/stream?topic=/usb_cam/image_raw&type=ros_compressed"></iframe>
  <iframe style="width:100%; height:400px;"  src="http://localhost:8080/stream?topic=/usb_cam/image_raw&type=ros_compressed"></iframe> -->




</body>



<script>
	const electron = require('electron');
	const { ipcRenderer } = electron;
	// var cv = require('opencv4nodejs');
 //  	// var path = require('path');
 //  	var fs = require('fs');
  	// console.log(path.resolve('public/images', '256_logo.png'));
  	// var selectedImgBGR = cv.imread(path.resolve('public/images', '256_logo.png')).resizeToMax(500);
  	// renderImage(selectedImgBGR, document.getElementById('test_image_div'));
	const topic_div = document.getElementById('html-topic-div');
	const todo_list = document.querySelector('ul');
	//Init IPC connection
	// ipcRenderer.send('ipc_init', 'IPC Started');
	// document.getElementById("Refresh IPC").onclick = function(){
	// 	ipcRenderer.send('ipc_init', 'IPC Refreshed');
	// 	console.log("IPC Refreshed");
	//  };
	// document.getElementById('Refresh IPC').click();

	ipcRenderer.on('test_ros_topic', (event, received_info) => {
		// const p = document.createElement('p');
		// const text = document.createTextNode(received_info);
		const li = document.createElement('p');
    	const text = document.createTextNode(received_info);
    	todo_list.innerHTML = '';
    	li.appendChild(text);
    	todo_list.appendChild(li);
    	// todo_list.innerHTML = li;
		// p.appendChild(text);
		// topic_div.appendChild(p);

	});
</script>
